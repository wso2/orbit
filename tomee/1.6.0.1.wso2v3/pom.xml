<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.wso2.tomee</groupId>
    <artifactId>tomee</artifactId>
    <version>${tomee.version}.wso2v3</version>
    <packaging>bundle</packaging>
    <name>WSO2 TomEE</name>
    <url>http://wso2.org</url>

    <properties>
        <openejb.version>4.6.0.1</openejb.version>
        <tomee.version>1.6.0.1</tomee.version>
        <myfaces.version>2.1.13</myfaces.version>
        <openwebbeans.version>1.2.1</openwebbeans.version>
        <openjpa.version>2.3.0-nonfinal-1540826</openjpa.version>
        <bval.version>0.5</bval.version>
        <sxc.version>0.8</sxc.version>
        <xbean.version>3.15</xbean.version>

        <!-- START CXF specific version properties -->
        <cxf.version>2.7.12</cxf.version>
        <cxf.version.wss4j>1.6.6</cxf.version.wss4j>
        <jaxb.version>2.2.5</jaxb.version>
        <neethi.cxf.version>3.0.3</neethi.cxf.version>
        <xmlsec.cxf.version>1.5.6</xmlsec.cxf.version>
        <ehcache.cxf.version>2.5.1</ehcache.cxf.version>
        <xmlschema.cxf.version>2.1.0</xmlschema.cxf.version>
        <xml.resolver.cxf.version>1.2</xml.resolver.cxf.version>
        <javax.ws.rs.version>2.0-m10</javax.ws.rs.version>
        <!-- END CXF specific version properties -->
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
                        <Bundle-Name>${project.artifactId}</Bundle-Name>
                        <Import-Package>
                            !org.apache.cxf.*,
                            *;resolution:=optional
                        </Import-Package>
                        <Export-Package>
                            org.apache.tomee.*;version="${tomee.version}",
                            org.apache.openejb.*;version="${openejb.version}";-split-package:=merge-first,
                            org.apache.xbean.*;version="3.15";-split-package:=merge-first,
                            org.apache.webbeans.*;version="${openwebbeans.version}",
                            org.apache.geronimo.transaction.*;version="3.1.1";-split-package:=merge-first,
                            org.apache.bval.*;version="1.0";-split-package:=merge-first,
                            org.apache.myfaces.*;version="${myfaces.version}";-split-package:=merge-first,
                            org.apache.openjpa.*;version="2.3.0";-split-package:=merge-first,
                            org.hsqldb.*;version="1.0.0";-split-package:=merge-first,

                            org.apache.openejb.server.cxf.transport.*;version="${tomee.version}";-split-package:=merge-first,
                            org.apache.openejb.server.cxf.rs.*;version="${tomee.version}";-split-package:=merge-first,
                            org.apache.openejb.server.cxf.*;version="${tomee.version}";-split-package:=merge-first,
                            org.apache.openejb.server.rest.*;version="${tomee.version}";-split-package:=merge-first,
                            org.apache.openejb.server.webservices.*;version="${tomee.version}";-split-package:=merge-first,
                            org.apache.openejb.core.webservices.*;version="${tomee.version}";-split-package:=merge-first,
                            org.apache.tomee.webservices;version="${tomee.version}";-split-package:=merge-first,

                            javax.ejb.*;version="3.1";-split-package:=merge-first,
                            javax.enterprise.*;version="1.0";-split-package:=merge-first,
                            javax.validation.*;version="1.0";-split-package:=merge-first,
                            javax.resource.*;version="1.6";-split-package:=merge-first,
                            javax.persistence.*;version="2.0";-split-package:=merge-first,
                            javax.security.jacc.*;version="1.4";-split-package:=merge-first,
                            javax.ws.rs.*;version="1.1";-split-package:=first,
                            javax.inject.*;version="1.0";-split-package:=merge-first,
                            javax.interceptor.*;version="1.1";-split-package:=merge-first,
                            javax.decorator.*;version="1.0";-split-package:=merge-first,
                            javax.management.j2ee.*;version="1.0.0";-split-package:=merge-first,
                            javax.faces.*;version="2.0";-split-package:=merge-first,

                            <!-- include javax.* packages specified below in a separate bundle? 
                            How about separate bundle for each spec. -KasunG -->
                            javax.xml.rpc.*;version="1.1";-split-package:=merge-first,
                        </Export-Package>

                        <Private-Package>
                        </Private-Package>

                        <Include-Resource>
                            {maven-resources},
                            @openejb-core-${openejb.version}.jar!/**,
                            @tomee-webapp-${tomee.version}.jar!/**,
                            @bval-jsr303-${bval.version}.jar!/META-INF/**,
                            @openwebbeans-impl-${openwebbeans.version}.jar!/META-INF/**,
                            @openwebbeans-impl-${openwebbeans.version}.jar!/openwebbeans/**,
                            @myfaces-impl-${myfaces.version}.jar!/META-INF/**,
                            @myfaces-api-${myfaces.version}.jar!/META-INF/**,
                            @tomee-myfaces-${tomee.version}.jar!/META-INF/**,
                            @openjpa-${openjpa.version}.jar!/META-INF/**,
                            @openejb-cxf-${openejb.version}.jar!/META-INF/**,
                            @openejb-cxf-rs-${openejb.version}.jar!/META-INF/**
                        </Include-Resource>
                        <Embed-Dependency>
                            sxc-runtime;scope=compile|runtime;inline=false;,
                            sxc-jaxb-core;scope=compile|runtime;inline=false;,

                           <!-- START CXF specific dependencies -->
                            cxf-api;scope=compile|runtime;inline=false;,
                            cxf-rt-bindings-soap;scope=compile|runtime;inline=false;,
                            cxf-rt-bindings-xml;scope=compile|runtime;inline=false;,
                            cxf-rt-core;scope=compile|runtime;inline=false;,
                            cxf-rt-databinding-jaxb;scope=compile|runtime;inline=false;,
                            cxf-rt-frontend-jaxrs;scope=compile|runtime;inline=false;,
                            cxf-rt-frontend-jaxws;scope=compile|runtime;inline=false;,
                            cxf-rt-frontend-simple;scope=compile|runtime;inline=false;,
                            cxf-rt-rs-extension-providers;scope=compile|runtime;inline=false;,
                            cxf-rt-rs-extension-search;scope=compile|runtime;inline=false;,
                            cxf-rt-rs-security-cors;scope=compile|runtime;inline=false;,
                            cxf-rt-rs-security-oauth2;scope=compile|runtime;inline=false;,
                            cxf-rt-transports-http;scope=compile|runtime;inline=false;,
                            cxf-rt-ws-addr;scope=compile|runtime;inline=false;,
                            cxf-rt-ws-policy;scope=compile|runtime;inline=false;,
                            cxf-rt-ws-security;scope=compile|runtime;inline=false;
                            neethi;scope=compile|runtime;inline=false;,
                            xmlschema-core;scope=compile|runtime;inline=false;,
                            xml-resolver;scope=compile|runtime;inline=false;
                            jaxb-impl;scope=compile|runtime;inline=false;
                            wss4j;scope=compile|runtime;inline=false;
                            xmlsec;scope=compile|runtime;inline=false;
                            ehcache-core;scope=compile|runtime;inline=false;
                           <!-- END CXF specific dependencies -->

                        </Embed-Dependency>
                        <DynamicImport-Package>*</DynamicImport-Package>
                        <Bundle-ClassPath>patch.jar,.</Bundle-ClassPath>

                    </instructions>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>javax.ws.rs</groupId>
            <artifactId>javax.ws.rs-api</artifactId>
            <version>${javax.ws.rs.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>tomee-webapp</artifactId>
            <version>${tomee.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>tomee-catalina</artifactId>
            <version>${tomee.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb.patch</groupId>
            <artifactId>openjpa</artifactId>
            <version>${openjpa.version}</version>
        </dependency>
        <dependency>
            <groupId>org.metatype.sxc</groupId>
            <artifactId>sxc-runtime</artifactId>
            <version>${sxc.version}</version>
        </dependency>
        <dependency>
            <groupId>org.metatype.sxc</groupId>
            <artifactId>sxc-jaxb-core</artifactId>
            <version>${sxc.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.openwebbeans</groupId>
            <artifactId>openwebbeans-impl</artifactId>
            <version>${openwebbeans.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.openwebbeans</groupId>
            <artifactId>openwebbeans-spi</artifactId>
            <version>${openwebbeans.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.xbean</groupId>
            <artifactId>xbean-asm4-shaded</artifactId>
            <version>${xbean.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xbean</groupId>
            <artifactId>xbean-bundleutils</artifactId>
            <version>${xbean.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xbean</groupId>
            <artifactId>xbean-finder-shaded</artifactId>
            <version>${xbean.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xbean</groupId>
            <artifactId>xbean-naming</artifactId>
            <version>${xbean.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xbean</groupId>
            <artifactId>xbean-reflect</artifactId>
            <version>${xbean.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.bval</groupId>
            <artifactId>bval-core</artifactId>
            <version>${bval.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.bval</groupId>
            <artifactId>bval-jsr303</artifactId>
            <version>${bval.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>openejb-cxf-rs</artifactId>
            <version>${openejb.version}</version>
            <scope>runtime</scope>
            <exclusions>
                <exclusion>
                    <groupId>org.apache.openejb</groupId>
                    <artifactId>javaee-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>openejb-cxf-transport</artifactId>
            <version>${openejb.version}</version>
            <scope>runtime</scope>
            <exclusions>
                <exclusion>
                    <groupId>org.apache.openejb</groupId>
                    <artifactId>javaee-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>openejb-cxf</artifactId>
            <version>${openejb.version}</version>
            <scope>runtime</scope>
            <exclusions>
                <exclusion>
                    <groupId>org.apache.openejb</groupId>
                    <artifactId>javaee-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>openejb-rest</artifactId>
            <version>${openejb.version}</version>
            <scope>runtime</scope>
            <exclusions>
                <exclusion>
                    <groupId>org.apache.openejb</groupId>
                    <artifactId>javaee-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>openejb-webservices</artifactId>
            <version>${openejb.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>org.apache.openejb</groupId>
                    <artifactId>javaee-api</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>tomee-webservices</artifactId>
            <version>${tomee.version}</version>
            <scope>runtime</scope>
            <exclusions>
                <exclusion>
                    <groupId>org.apache.openejb</groupId>
                    <artifactId>javaee-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>openejb-core</artifactId>
            <version>${openejb.version}</version>
            <scope>runtime</scope>
            <exclusions>
                <exclusion>
                    <groupId>org.apache.openejb</groupId>
                    <artifactId>javaee-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <!-- START CXF deps -->
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-api</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-bindings-soap</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-bindings-xml</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-core</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-databinding-jaxb</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxrs</artifactId>
            <version>${cxf.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.ws.rs</groupId>
                    <artifactId>javax.ws.rs-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxws</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-simple</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-rs-extension-providers</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-rs-extension-search</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-rs-security-cors</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-rs-security-oauth2</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-ws-addr</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-ws-policy</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-ws-security</artifactId>
            <version>${cxf.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.neethi</groupId>
            <artifactId>neethi</artifactId>
            <version>${neethi.cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.xmlschema</groupId>
            <artifactId>xmlschema-core</artifactId>
            <version>${xmlschema.cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.santuario</groupId>
            <artifactId>xmlsec</artifactId>
            <version>${xmlsec.cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>net.sf.ehcache</groupId>
            <artifactId>ehcache-core</artifactId>
            <version>${ehcache.cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>xml-resolver</groupId>
            <artifactId>xml-resolver</artifactId>
            <version>${xml.resolver.cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>${jaxb.version}</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-xjc</artifactId>
            <version>${jaxb.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.security</groupId>
            <artifactId>wss4j</artifactId>
            <version>${cxf.version.wss4j}</version>
        </dependency>
        <!-- END CXF deps -->

    </dependencies>

    <distributionManagement>
        <repository>
            <id>wso2.releases</id>
            <name>WSO2 internal Repository</name>
            <url>http://maven.wso2.org/nexus/content/repositories/releases/</url>
        </repository>

        <snapshotRepository>
            <id>wso2.snapshots</id>
            <name>Apache Snapshot Repository</name>
            <url>http://maven.wso2.org/nexus/content/repositories/snapshots/</url>
        </snapshotRepository>
    </distributionManagement>

</project>
